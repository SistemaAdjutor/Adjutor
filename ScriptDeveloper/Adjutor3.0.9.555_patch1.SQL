UPDATE  VERSAOSISTEMA 
SET VERSAOSISTEMA.SCRIPTADJUTOR = '3.0.9.555 patch 1',
    VERSAOSISTEMA.DATA   = '13.04.2021',
	VERSAO = '3.0.9.555'
 where VERSAOSISTEMA.CODIGO = 1;
 
commit work;

CREATE INDEX CLI0000_rep_codigo ON CLI0000 (rep_codigo);
CREATE INDEX TAREFAS_CRM_TRF_NIVEL ON TAREFAS_CRM(trf_nivel);
CREATE INDEX FAT_PC01_IDX9 ON FAT_PC01 COMPUTED BY (datediff (day, FPC_VENCTO, CURRENT_DATE));



Update CLI0000 
Set CLI_DTULTCOM = (SELECT FIRST 1 NF_EMISSAO FROM NF0001 nf WHERE nf_cancelada = 'N' AND nf.CLI_CODIGO = cli0000.CLI_CODIGO ORDER BY NF_EMISSAO DESC )
 ,CLI_VL_ULTCOMP = COALESCE(
                   (SELECT FIRST 1 NF_TOT_PROD + NF_VL_IPI+ NF_VLFRETE+NF_VLSEGURO+  NF_DESP_ACES+NF_VL_SUBTRIB - NF_VL_DESCTO
                    FROM NF0001 nf WHERE nf.CLI_CODIGO = cli0000.CLI_CODIGO ORDER BY NF_EMISSAO DESC ) ,0);
					
commit work;


CREATE INDEX ARQUIVO_CNAB_LITERAL ON ARQUIVO_CNAB (CNAB_LITERAL_ARQUIVO);
CREATE INDEX IDX_DCN_COD_OCORRENCIA ON DUPLICAT_CNAB (DCN_COD_OCORRENCIA);
CREATE INDEX IDX_DUP_PARCELA ON DUPLICAT_CNAB (DCN_DUP_PARCELA);
CREATE INDEX IDX_DCN_COD_REMESSA ON DUPLICAT_CNAB (EMP_CODIGO, DCN_COD_REMESSA);
CREATE INDEX IDX_CNAB_CODIGO_BANCO ON ARQUIVO_CNAB (CNAB_CODIGO_BANCO);
CREATE INDEX IDX_CLI_UND_CONSUMIDORA ON CLI0000(CLI_UND_CONSUMIDORA);

CREATE INDEX idx_REJ_COD_REJEICAO ON REJEICAO_CNAB  (REJ_COD_REJEICAO) ;
CREATE INDEX idx_REJ_COD_BANCO ON REJEICAO_CNAB  (REJ_COD_BANCO) ; 
CREATE INDEX idx_DCN_COD_REJEICAO ON DUPLICAT_CNAB (DCN_COD_REJEICAO);


ALTER TABLE TIPO_MOLA ADD MMO_TIPO VARCHAR(1);
COMMENT ON COLUMN TIPO_MOLA.MMO_TIPO IS 'Mola de compressao: C ,Mola de tracao: R,  Mola de torcao: O';

ALTER TABLE TIPO_MOLA ADD MMO_VARIACAO VARCHAR(1);
COMMENT ON COLUMN TIPO_MOLA.MMO_VARIACAO IS 'Paralela: P ,Conica: C,  Biconica: B, Convexa: V';

ALTER TABLE MOLA_MATERIA ADD MMO_PARTE_DI VARCHAR(1) DEFAULT 'F' ;
COMMENT ON COLUMN MOLA_MATERIA.MMO_PARTE_DI IS 'Calculo parte do diametro interno';

ALTER TABLE MOLA_MATERIA ADD MMO_PERDA NUMERIC(18,5);
ALTER TABLE MOLA_MATERIA ADD MMO_DIAMETRO_INT_MENOR NUMERIC(18,5);
ALTER TABLE MOLA_MATERIA ADD MMO_TOLERANCIA_DI_MENOR_MIN NUMERIC(18,5);
ALTER TABLE MOLA_MATERIA ADD MMO_TOLERANCIA_DI_MENOR_MAX NUMERIC(18,5);

ALTER TABLE MOLA_MATERIA ADD MMO_DIAMETRO_INT_MAIOR NUMERIC(18,5);
ALTER TABLE MOLA_MATERIA ADD MMO_TOLERANCIA_DI_MAIOR_MIN NUMERIC(18,5);
ALTER TABLE MOLA_MATERIA ADD MMO_TOLERANCIA_DI_MAIOR_MAX NUMERIC(18,5);
commit work;

ALTER TABLE TIPO_MOLA ADD MMO_PERDA VARCHAR(1);
ALTER TABLE TIPO_MOLA ADD MMO_DIAMETRO_INT_MENOR VARCHAR(1);
ALTER TABLE TIPO_MOLA ADD MMO_DIAMETRO_INT_MAIOR VARCHAR(1);
commit work;

ALTER TABLE MOLA_MATERIA ADD MMO_TIPO_HASTE VARCHAR(1);
COMMENT ON COLUMN MOLA_MATERIA.MMO_TIPO_HASTE IS 'Amostra: A, Desenho: D';

ALTER TABLE MOLA_MATERIA ADD MMO_COMPRIMENTO_HASTE_HA NUMERIC(18,5);
ALTER TABLE MOLA_MATERIA ADD MMO_COMPRIMENTO_HASTE_HB NUMERIC(18,5);

ALTER TABLE MOLA_MATERIA ADD MMO_POSICAO_HASTE VARCHAR(1);
COMMENT ON COLUMN MOLA_MATERIA.MMO_POSICAO_HASTE IS 'Amostra: A, Desenho: D';
commit work;

ALTER TABLE TIPO_MOLA ADD MMO_TIPO_HASTE VARCHAR(1);
ALTER TABLE TIPO_MOLA ADD MMO_COMPRIMENTO_HASTE_HA VARCHAR(1);
ALTER TABLE TIPO_MOLA ADD MMO_COMPRIMENTO_HASTE_HB VARCHAR(1);
ALTER TABLE TIPO_MOLA ADD MMO_POSICAO_HASTE VARCHAR(1);
commit work;